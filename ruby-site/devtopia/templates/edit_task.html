<div id="task_edit_div" t:docid="edit_task">
	<form id="task_edit_form" class="edit_form">
			<b>Name:</b>&#160;<input type="text" name="name" id="name" value="{record.name}"/><br/><br/>
			<b>Description:</b><br/>
			<textarea name="description" id="description">{record.description}</textarea><br/>
			<b>Expected Time:</b>&#160;
			<input type="text" name="expectedtime" id="expectedtime" value="{record.calc_expectedtime}" 
				cond:disabled="record.expectedtime != record.calc_expectedtime"/><br/><br/>
			<b>Cumulative Time:</b>&#160;{record.cumulative_time}&#160;days<br/><br/>

			<b>State:</b>&#160;
			<select id="state" name="state">
				<t:if t:id="record.valid_state?(:new)">
					<option value="0" cond:selected="record.state == :new">New</option>
				</t:if>
				<t:if t:id="record.valid_state?(:in_progress)">
					<option value="1" cond:selected="record.state == :in_progress">In Progress</option>
				</t:if>
				
				<t:if t:id="record.valid_state?(:done)">
					<option value="2" cond:selected="record.state == :done">Done</option>
				</t:if>
				
				<option value="3" cond:selected="record.state == :cancelled">Cancelled</option>
			</select><br/><br/>

			<b>Sprint:</b>&#160;
				<t:if t:id="programmer.manager">
					<t:handler-include path="/projectmanager/sprint_selector/{record.projectid}/{record.sprintid}" area="Self" />
				</t:if>
				<t:if t:id="!programmer.manager">
					{record.sprint_name}
				</t:if>
				<br/><br/>

			<b>Todo:</b><br/>
			<t:handler-include path="/projectmanager/related_object_editor" area="Self">
				<t:var t:name="'records'" t:val="record.todos" />
				<t:var t:name="'parent_record'" t:val="record" />
				<t:var t:name="'record_type'" t:val="'Devtopia::Todo'" />
			</t:handler-include><br/><br/>
			
			<b>Programmers:</b><br/>
			<t:if t:id="programmer.manager">
				<div id="programmers_div" style="height:120px; overflow-y: scroll; width: 150px">
					<t:loop t:id="record.programmers" t:iter="task_programmer">
						<input type="checkbox" id="programmer[{task_programmer.userid}]" 
							name="programmer[{task_programmer.userid}]" cond:checked="task_programmer.checked">{task_programmer.username}</input><br/>
					</t:loop>
				</div>
			</t:if>
			<t:if t:id="!programmer.manager">
				<ul>
					<t:loop t:id="record.programmers" t:iter="task_programmer">
						<t:if t:id="task_programmer.checked">
							<li>{task_programmer.username}</li>
						</t:if>
					</t:loop>				
				</ul>
			</t:if>

			<t:template-include name="buttons" module="devtopia" />
	</form>
</div>